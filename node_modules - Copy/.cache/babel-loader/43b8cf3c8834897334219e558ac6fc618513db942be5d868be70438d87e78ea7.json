{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { useTheme } from '@mui/material/styles';\nimport { findGridCellElementsFromCol, findGridElement, findLeftPinnedCellsAfterCol, findRightPinnedCellsBeforeCol, getFieldFromHeaderElem, findHeaderElementFromField, findGroupHeaderElementsFromField, findGridHeader, findGridCells, findParentElementFromClassName, findLeftPinnedHeadersAfterCol, findRightPinnedHeadersBeforeCol } from '../../../utils/domUtils';\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from './gridColumnResizeApi';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { useGridApiEventHandler, useGridApiMethod, useGridApiOptionHandler, useGridLogger, useGridNativeEventListener, useGridSelector, useOnMount } from '../../utils';\nimport { gridVirtualizationColumnEnabledSelector } from '../virtualization';\nimport { createControllablePromise } from '../../../utils/createControllablePromise';\nimport { clamp } from '../../../utils/utils';\nimport { useTimeout } from '../../utils/useTimeout';\nimport { GridPinnedColumnPosition } from '../columns/gridColumnsInterfaces';\nimport { gridColumnsStateSelector } from '../columns';\n// TODO: remove support for Safari < 13.\n// https://caniuse.com/#search=touch-action\n//\n// Safari, on iOS, supports touch action since v13.\n// Over 80% of the iOS phones are compatible\n// in August 2020.\n// Utilizing the CSS.supports method to check if touch-action is supported.\n// Since CSS.supports is supported on all but Edge@12 and IE and touch-action\n// is supported on both Edge@12 and IE if CSS.supports is not available that means that\n// touch-action will be supported\nlet cachedSupportsTouchActionNone = false;\nfunction doesSupportTouchActionNone() {\n  if (cachedSupportsTouchActionNone === undefined) {\n    if (typeof CSS !== 'undefined' && typeof CSS.supports === 'function') {\n      cachedSupportsTouchActionNone = CSS.supports('touch-action', 'none');\n    } else {\n      cachedSupportsTouchActionNone = true;\n    }\n  }\n  return cachedSupportsTouchActionNone;\n}\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return newWidth;\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(separator, direction) {\n  const side = separator.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (direction === 'rtl') {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef();\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (for example zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      var _cell$getBoundingClie;\n      return (_cell$getBoundingClie = cell.getBoundingClientRect().width) !== null && _cell$getBoundingClie !== void 0 ? _cell$getBoundingClie : 0;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        var _iconContainer$client, _menuContainer$client;\n        const title = header.querySelector(\".\".concat(gridClasses.columnHeaderTitle));\n        const content = header.querySelector(\".\".concat(gridClasses.columnHeaderTitleContainerContent));\n        const iconContainer = header.querySelector(\".\".concat(gridClasses.iconButtonContainer));\n        const menuContainer = header.querySelector(\".\".concat(gridClasses.menuIcon));\n        const element = title !== null && title !== void 0 ? title : content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = contentWidth + paddingWidth + ((_iconContainer$client = iconContainer === null || iconContainer === void 0 ? void 0 : iconContainer.clientWidth) !== null && _iconContainer$client !== void 0 ? _iconContainer$client : 0) + ((_menuContainer$client = menuContainer === null || menuContainer === void 0 ? void 0 : menuContainer.clientWidth) !== null && _menuContainer$client !== void 0 ? _menuContainer$client : 0);\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const theme = useTheme();\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const colDefRef = React.useRef();\n  const previousMouseClickEvent = React.useRef();\n  const columnHeaderElementRef = React.useRef();\n  const headerFilterElementRef = React.useRef();\n  const groupHeaderElementsRef = React.useRef([]);\n  const cellElementsRef = React.useRef([]);\n  const leftPinnedCellsAfterRef = React.useRef([]);\n  const rightPinnedCellsBeforeRef = React.useRef([]);\n  const fillerLeftRef = React.useRef();\n  const fillerRightRef = React.useRef();\n  const leftPinnedHeadersAfterRef = React.useRef([]);\n  const rightPinnedHeadersBeforeRef = React.useRef([]);\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef();\n  const resizeDirection = React.useRef();\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef();\n  const updateWidth = newWidth => {\n    logger.debug(\"Updating width to \".concat(newWidth, \" for col \").concat(colDefRef.current.field));\n    const prevWidth = columnHeaderElementRef.current.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    colDefRef.current.computedWidth = newWidth;\n    colDefRef.current.width = newWidth;\n    colDefRef.current.flex = 0;\n    columnHeaderElementRef.current.style.width = \"\".concat(newWidth, \"px\");\n    columnHeaderElementRef.current.style.minWidth = \"\".concat(newWidth, \"px\");\n    columnHeaderElementRef.current.style.maxWidth = \"\".concat(newWidth, \"px\");\n    const headerFilterElement = headerFilterElementRef.current;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = \"\".concat(newWidth, \"px\");\n      headerFilterElement.style.minWidth = \"\".concat(newWidth, \"px\");\n      headerFilterElement.style.maxWidth = \"\".concat(newWidth, \"px\");\n    }\n    groupHeaderElementsRef.current.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = \"\".concat(newWidth, \"px\");\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = \"\".concat(div.offsetWidth + widthDiff, \"px\");\n      }\n      div.style.width = finalWidth;\n      div.style.minWidth = finalWidth;\n      div.style.maxWidth = finalWidth;\n    });\n    cellElementsRef.current.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = \"\".concat(newWidth, \"px\");\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = \"\".concat(div.offsetWidth + widthDiff, \"px\");\n      }\n      div.style.setProperty('--width', finalWidth);\n    });\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, colDefRef.current.field);\n    if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n      updateProperty(fillerLeftRef.current, 'width', widthDiff);\n      leftPinnedCellsAfterRef.current.forEach(cell => {\n        updateProperty(cell, 'left', widthDiff);\n      });\n      leftPinnedHeadersAfterRef.current.forEach(header => {\n        updateProperty(header, 'left', widthDiff);\n      });\n    }\n    if (pinnedPosition === GridPinnedColumnPosition.RIGHT) {\n      updateProperty(fillerRightRef.current, 'width', widthDiff);\n      rightPinnedCellsBeforeRef.current.forEach(cell => {\n        updateProperty(cell, 'right', widthDiff);\n      });\n      rightPinnedHeadersBeforeRef.current.forEach(header => {\n        updateProperty(header, 'right', widthDiff);\n      });\n    }\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n\n    // Prevent double-clicks from being interpreted as two separate clicks\n    if (previousMouseClickEvent.current) {\n      const prevEvent = previousMouseClickEvent.current;\n      const prevTimeStamp = prevEvent.timeStamp;\n      const prevClientX = prevEvent.clientX;\n      const prevClientY = prevEvent.clientY;\n\n      // Check if the current event is part of a double-click\n      if (nativeEvent.timeStamp - prevTimeStamp < 300 && nativeEvent.clientX === prevClientX && nativeEvent.clientY === prevClientY) {\n        previousMouseClickEvent.current = undefined;\n        return;\n      }\n    }\n    if (colDefRef.current) {\n      apiRef.current.setColumnWidth(colDefRef.current.field, colDefRef.current.width);\n      logger.debug(\"Updating col \".concat(colDefRef.current.field, \" with new width: \").concat(colDefRef.current.width));\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const storeReferences = (colDef, separator, xStart) => {\n    var _apiRef$current$colum;\n    const root = apiRef.current.rootElementRef.current;\n    colDefRef.current = colDef;\n    columnHeaderElementRef.current = findHeaderElementFromField(apiRef.current.columnHeadersContainerRef.current, colDef.field);\n    const headerFilterElement = root.querySelector(\".\".concat(gridClasses.headerFilterRow, \" [data-field=\\\"\").concat(colDef.field, \"\\\"]\"));\n    if (headerFilterElement) {\n      headerFilterElementRef.current = headerFilterElement;\n    }\n    groupHeaderElementsRef.current = findGroupHeaderElementsFromField((_apiRef$current$colum = apiRef.current.columnHeadersContainerRef) === null || _apiRef$current$colum === void 0 ? void 0 : _apiRef$current$colum.current, colDef.field);\n    cellElementsRef.current = findGridCellElementsFromCol(columnHeaderElementRef.current, apiRef.current);\n    fillerLeftRef.current = findGridElement(apiRef.current, 'filler--pinnedLeft');\n    fillerRightRef.current = findGridElement(apiRef.current, 'filler--pinnedRight');\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, colDefRef.current.field);\n    leftPinnedCellsAfterRef.current = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedCellsAfterCol(apiRef.current, columnHeaderElementRef.current);\n    rightPinnedCellsBeforeRef.current = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedCellsBeforeCol(apiRef.current, columnHeaderElementRef.current);\n    leftPinnedHeadersAfterRef.current = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedHeadersAfterCol(apiRef.current, columnHeaderElementRef.current);\n    rightPinnedHeadersBeforeRef.current = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedHeadersBeforeCol(apiRef.current, columnHeaderElementRef.current);\n    resizeDirection.current = getResizeDirection(separator, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(xStart, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: columnHeaderElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: columnHeaderElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    // If touch-action: none; is not supported we need to prevent the scroll manually.\n    if (!doesSupportTouchActionNone()) {\n      event.preventDefault();\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    const columnHeaderElement = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(columnHeaderElement);\n    const colDef = apiRef.current.getColumn(field);\n    logger.debug(\"Start Resize on col \".concat(colDef.field));\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    storeReferences(colDef, cellSeparator, touch.clientX);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (columnHeaderElementRef.current) {\n      columnHeaderElementRef.current.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, columnHeaderElementRef, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(_ref => {\n    let {\n      field\n    } = _ref;\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback((_ref2, event) => {\n    let {\n      colDef\n    } = _ref2;\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(\"Start Resize on col \".concat(colDef.field));\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    storeReferences(colDef, event.currentTarget, event.clientX);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    previousMouseClickEvent.current = event.nativeEvent;\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    var _apiRef$current$rootE, _userOptions$columns;\n    const root = (_apiRef$current$rootE = apiRef.current.rootElementRef) === null || _apiRef$current$rootE === void 0 ? void 0 : _apiRef$current$rootE.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef.current.state);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: (_userOptions$columns = userOptions === null || userOptions === void 0 ? void 0 : userOptions.columns) !== null && _userOptions$columns !== void 0 ? _userOptions$columns : state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      apiRef.current.unstable_setColumnVirtualization(false);\n      await columnVirtualizationDisabled();\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field]\n      }));\n      if (options.expand) {\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => {\n          var _ref3, _widthByField$column$;\n          return total + ((_ref3 = (_widthByField$column$ = widthByField[column.field]) !== null && _widthByField$column$ !== void 0 ? _widthByField$column$ : column.computedWidth) !== null && _ref3 !== void 0 ? _ref3 : column.width);\n        }, 0);\n        const availableWidth = apiRef.current.getRootDimensions().viewportInnerSize.width;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n      newColumns.forEach((newColumn, index) => {\n        if (newColumn.width !== columns[index].width) {\n          const width = newColumn.width;\n          apiRef.current.publishEvent('columnWidthChange', {\n            element: apiRef.current.getColumnHeaderElement(newColumn.field),\n            colDef: newColumn,\n            width\n          });\n        }\n      });\n    } finally {\n      apiRef.current.unstable_setColumnVirtualization(true);\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => {\n    var _apiRef$current$colum2;\n    return (_apiRef$current$colum2 = apiRef.current.columnHeadersContainerRef) === null || _apiRef$current$colum2 === void 0 ? void 0 : _apiRef$current$colum2.current;\n  }, 'touchstart', handleTouchStart, {\n    passive: doesSupportTouchActionNone()\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridApiEventHandler(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridApiEventHandler(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridApiEventHandler(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridApiOptionHandler(apiRef, 'columnResize', props.onColumnResize);\n  useGridApiOptionHandler(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};\nfunction updateProperty(element, property, delta) {\n  if (!element) {\n    return;\n  }\n  element.style[property] = \"\".concat(parseInt(element.style[property], 10) + delta, \"px\");\n}","map":{"version":3,"names":["_extends","React","unstable_ownerDocument","ownerDocument","unstable_useEventCallback","useEventCallback","useTheme","findGridCellElementsFromCol","findGridElement","findLeftPinnedCellsAfterCol","findRightPinnedCellsBeforeCol","getFieldFromHeaderElem","findHeaderElementFromField","findGroupHeaderElementsFromField","findGridHeader","findGridCells","findParentElementFromClassName","findLeftPinnedHeadersAfterCol","findRightPinnedHeadersBeforeCol","DEFAULT_GRID_AUTOSIZE_OPTIONS","gridClasses","useGridApiEventHandler","useGridApiMethod","useGridApiOptionHandler","useGridLogger","useGridNativeEventListener","useGridSelector","useOnMount","gridVirtualizationColumnEnabledSelector","createControllablePromise","clamp","useTimeout","GridPinnedColumnPosition","gridColumnsStateSelector","cachedSupportsTouchActionNone","doesSupportTouchActionNone","undefined","CSS","supports","trackFinger","event","currentTouchId","changedTouches","i","length","touch","identifier","x","clientX","y","clientY","computeNewWidth","initialOffsetToSeparator","clickX","columnBounds","resizeDirection","newWidth","left","right","computeOffsetToSeparator","flipResizeDirection","side","getResizeDirection","separator","direction","classList","contains","preventClick","preventDefault","stopImmediatePropagation","useColumnVirtualizationDisabled","apiRef","promise","useRef","selector","value","useEffect","current","resolve","asyncCheck","Promise","excludeOutliers","inputValues","factor","values","slice","sort","a","b","q1","Math","floor","q3","iqr","deviation","filter","v","extractColumnWidths","options","columns","widthByField","root","rootElementRef","add","autosizing","forEach","column","cells","field","widths","map","cell","_cell$getBoundingClie","getBoundingClientRect","width","filteredWidths","includeOutliers","outliersFactor","includeHeaders","header","_iconContainer$client","_menuContainer$client","title","querySelector","concat","columnHeaderTitle","content","columnHeaderTitleContainerContent","iconContainer","iconButtonContainer","menuContainer","menuIcon","element","style","window","getComputedStyle","paddingWidth","parseInt","paddingLeft","paddingRight","contentWidth","scrollWidth","clientWidth","push","hasColumnMin","minWidth","Infinity","hasColumnMax","maxWidth","min","max","maxContent","remove","columnResizeStateInitializer","state","columnResize","resizingColumnField","useGridColumnResize","props","theme","logger","colDefRef","previousMouseClickEvent","columnHeaderElementRef","headerFilterElementRef","groupHeaderElementsRef","cellElementsRef","leftPinnedCellsAfterRef","rightPinnedCellsBeforeRef","fillerLeftRef","fillerRightRef","leftPinnedHeadersAfterRef","rightPinnedHeadersBeforeRef","stopResizeEventTimeout","touchId","updateWidth","debug","prevWidth","offsetWidth","widthDiff","computedWidth","flex","headerFilterElement","div","finalWidth","getAttribute","setProperty","pinnedPosition","unstable_applyPipeProcessors","LEFT","updateProperty","RIGHT","finishResize","nativeEvent","stopListening","prevEvent","prevTimeStamp","timeStamp","prevClientX","prevClientY","setColumnWidth","start","publishEvent","storeReferences","colDef","xStart","_apiRef$current$colum","columnHeadersContainerRef","headerFilterRow","handleResizeMouseUp","handleResizeMouseMove","buttons","params","handleTouchEnd","finger","handleTouchMove","type","handleTouchStart","cellSeparator","target","columnHeaderElement","columnHeader","getColumn","doc","currentTarget","addEventListener","useCallback","body","removeProperty","removeEventListener","setTimeout","pointerEvents","handleResizeStart","_ref","setState","forceUpdate","handleResizeStop","handleColumnResizeMouseDown","_ref2","button","cursor","handleColumnSeparatorDoubleClick","disableAutosize","lookup","resizable","autosizeColumns","autosizeOptions","columnVirtualizationDisabled","isAutosizingRef","userOptions","_apiRef$current$rootE","_userOptions$columns","orderedFields","c","columnVisibilityModel","unstable_setColumnVirtualization","newColumns","expand","visibleColumns","totalWidth","reduce","total","_ref3","_widthByField$column$","availableWidth","getRootDimensions","viewportInnerSize","remainingWidth","widthPerColumn","updateColumns","newColumn","index","getColumnHeaderElement","autosizeOnMount","then","_apiRef$current$colum2","passive","onColumnResize","onColumnWidthChange","property","delta"],"sources":["D:/PROJECTS/react-admin/node_modules/@mui/x-data-grid/hooks/features/columnResize/useGridColumnResize.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { useTheme } from '@mui/material/styles';\nimport { findGridCellElementsFromCol, findGridElement, findLeftPinnedCellsAfterCol, findRightPinnedCellsBeforeCol, getFieldFromHeaderElem, findHeaderElementFromField, findGroupHeaderElementsFromField, findGridHeader, findGridCells, findParentElementFromClassName, findLeftPinnedHeadersAfterCol, findRightPinnedHeadersBeforeCol } from '../../../utils/domUtils';\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from './gridColumnResizeApi';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { useGridApiEventHandler, useGridApiMethod, useGridApiOptionHandler, useGridLogger, useGridNativeEventListener, useGridSelector, useOnMount } from '../../utils';\nimport { gridVirtualizationColumnEnabledSelector } from '../virtualization';\nimport { createControllablePromise } from '../../../utils/createControllablePromise';\nimport { clamp } from '../../../utils/utils';\nimport { useTimeout } from '../../utils/useTimeout';\nimport { GridPinnedColumnPosition } from '../columns/gridColumnsInterfaces';\nimport { gridColumnsStateSelector } from '../columns';\n// TODO: remove support for Safari < 13.\n// https://caniuse.com/#search=touch-action\n//\n// Safari, on iOS, supports touch action since v13.\n// Over 80% of the iOS phones are compatible\n// in August 2020.\n// Utilizing the CSS.supports method to check if touch-action is supported.\n// Since CSS.supports is supported on all but Edge@12 and IE and touch-action\n// is supported on both Edge@12 and IE if CSS.supports is not available that means that\n// touch-action will be supported\nlet cachedSupportsTouchActionNone = false;\nfunction doesSupportTouchActionNone() {\n  if (cachedSupportsTouchActionNone === undefined) {\n    if (typeof CSS !== 'undefined' && typeof CSS.supports === 'function') {\n      cachedSupportsTouchActionNone = CSS.supports('touch-action', 'none');\n    } else {\n      cachedSupportsTouchActionNone = true;\n    }\n  }\n  return cachedSupportsTouchActionNone;\n}\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return newWidth;\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(separator, direction) {\n  const side = separator.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (direction === 'rtl') {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef();\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (for example zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      return cell.getBoundingClientRect().width ?? 0;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        const title = header.querySelector(`.${gridClasses.columnHeaderTitle}`);\n        const content = header.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n        const iconContainer = header.querySelector(`.${gridClasses.iconButtonContainer}`);\n        const menuContainer = header.querySelector(`.${gridClasses.menuIcon}`);\n        const element = title ?? content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = contentWidth + paddingWidth + (iconContainer?.clientWidth ?? 0) + (menuContainer?.clientWidth ?? 0);\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const theme = useTheme();\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const colDefRef = React.useRef();\n  const previousMouseClickEvent = React.useRef();\n  const columnHeaderElementRef = React.useRef();\n  const headerFilterElementRef = React.useRef();\n  const groupHeaderElementsRef = React.useRef([]);\n  const cellElementsRef = React.useRef([]);\n  const leftPinnedCellsAfterRef = React.useRef([]);\n  const rightPinnedCellsBeforeRef = React.useRef([]);\n  const fillerLeftRef = React.useRef();\n  const fillerRightRef = React.useRef();\n  const leftPinnedHeadersAfterRef = React.useRef([]);\n  const rightPinnedHeadersBeforeRef = React.useRef([]);\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef();\n  const resizeDirection = React.useRef();\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef();\n  const updateWidth = newWidth => {\n    logger.debug(`Updating width to ${newWidth} for col ${colDefRef.current.field}`);\n    const prevWidth = columnHeaderElementRef.current.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    colDefRef.current.computedWidth = newWidth;\n    colDefRef.current.width = newWidth;\n    colDefRef.current.flex = 0;\n    columnHeaderElementRef.current.style.width = `${newWidth}px`;\n    columnHeaderElementRef.current.style.minWidth = `${newWidth}px`;\n    columnHeaderElementRef.current.style.maxWidth = `${newWidth}px`;\n    const headerFilterElement = headerFilterElementRef.current;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = `${newWidth}px`;\n      headerFilterElement.style.minWidth = `${newWidth}px`;\n      headerFilterElement.style.maxWidth = `${newWidth}px`;\n    }\n    groupHeaderElementsRef.current.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.width = finalWidth;\n      div.style.minWidth = finalWidth;\n      div.style.maxWidth = finalWidth;\n    });\n    cellElementsRef.current.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.setProperty('--width', finalWidth);\n    });\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, colDefRef.current.field);\n    if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n      updateProperty(fillerLeftRef.current, 'width', widthDiff);\n      leftPinnedCellsAfterRef.current.forEach(cell => {\n        updateProperty(cell, 'left', widthDiff);\n      });\n      leftPinnedHeadersAfterRef.current.forEach(header => {\n        updateProperty(header, 'left', widthDiff);\n      });\n    }\n    if (pinnedPosition === GridPinnedColumnPosition.RIGHT) {\n      updateProperty(fillerRightRef.current, 'width', widthDiff);\n      rightPinnedCellsBeforeRef.current.forEach(cell => {\n        updateProperty(cell, 'right', widthDiff);\n      });\n      rightPinnedHeadersBeforeRef.current.forEach(header => {\n        updateProperty(header, 'right', widthDiff);\n      });\n    }\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n\n    // Prevent double-clicks from being interpreted as two separate clicks\n    if (previousMouseClickEvent.current) {\n      const prevEvent = previousMouseClickEvent.current;\n      const prevTimeStamp = prevEvent.timeStamp;\n      const prevClientX = prevEvent.clientX;\n      const prevClientY = prevEvent.clientY;\n\n      // Check if the current event is part of a double-click\n      if (nativeEvent.timeStamp - prevTimeStamp < 300 && nativeEvent.clientX === prevClientX && nativeEvent.clientY === prevClientY) {\n        previousMouseClickEvent.current = undefined;\n        return;\n      }\n    }\n    if (colDefRef.current) {\n      apiRef.current.setColumnWidth(colDefRef.current.field, colDefRef.current.width);\n      logger.debug(`Updating col ${colDefRef.current.field} with new width: ${colDefRef.current.width}`);\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const storeReferences = (colDef, separator, xStart) => {\n    const root = apiRef.current.rootElementRef.current;\n    colDefRef.current = colDef;\n    columnHeaderElementRef.current = findHeaderElementFromField(apiRef.current.columnHeadersContainerRef.current, colDef.field);\n    const headerFilterElement = root.querySelector(`.${gridClasses.headerFilterRow} [data-field=\"${colDef.field}\"]`);\n    if (headerFilterElement) {\n      headerFilterElementRef.current = headerFilterElement;\n    }\n    groupHeaderElementsRef.current = findGroupHeaderElementsFromField(apiRef.current.columnHeadersContainerRef?.current, colDef.field);\n    cellElementsRef.current = findGridCellElementsFromCol(columnHeaderElementRef.current, apiRef.current);\n    fillerLeftRef.current = findGridElement(apiRef.current, 'filler--pinnedLeft');\n    fillerRightRef.current = findGridElement(apiRef.current, 'filler--pinnedRight');\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, colDefRef.current.field);\n    leftPinnedCellsAfterRef.current = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedCellsAfterCol(apiRef.current, columnHeaderElementRef.current);\n    rightPinnedCellsBeforeRef.current = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedCellsBeforeCol(apiRef.current, columnHeaderElementRef.current);\n    leftPinnedHeadersAfterRef.current = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedHeadersAfterCol(apiRef.current, columnHeaderElementRef.current);\n    rightPinnedHeadersBeforeRef.current = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedHeadersBeforeCol(apiRef.current, columnHeaderElementRef.current);\n    resizeDirection.current = getResizeDirection(separator, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(xStart, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: columnHeaderElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, columnHeaderElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: columnHeaderElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    // If touch-action: none; is not supported we need to prevent the scroll manually.\n    if (!doesSupportTouchActionNone()) {\n      event.preventDefault();\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    const columnHeaderElement = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(columnHeaderElement);\n    const colDef = apiRef.current.getColumn(field);\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    storeReferences(colDef, cellSeparator, touch.clientX);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (columnHeaderElementRef.current) {\n      columnHeaderElementRef.current.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, columnHeaderElementRef, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(({\n    field\n  }) => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback(({\n    colDef\n  }, event) => {\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    storeReferences(colDef, event.currentTarget, event.clientX);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    previousMouseClickEvent.current = event.nativeEvent;\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    const root = apiRef.current.rootElementRef?.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef.current.state);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: userOptions?.columns ?? state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      apiRef.current.unstable_setColumnVirtualization(false);\n      await columnVirtualizationDisabled();\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field]\n      }));\n      if (options.expand) {\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => total + (widthByField[column.field] ?? column.computedWidth ?? column.width), 0);\n        const availableWidth = apiRef.current.getRootDimensions().viewportInnerSize.width;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n      newColumns.forEach((newColumn, index) => {\n        if (newColumn.width !== columns[index].width) {\n          const width = newColumn.width;\n          apiRef.current.publishEvent('columnWidthChange', {\n            element: apiRef.current.getColumnHeaderElement(newColumn.field),\n            colDef: newColumn,\n            width\n          });\n        }\n      });\n    } finally {\n      apiRef.current.unstable_setColumnVirtualization(true);\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => apiRef.current.columnHeadersContainerRef?.current, 'touchstart', handleTouchStart, {\n    passive: doesSupportTouchActionNone()\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridApiEventHandler(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridApiEventHandler(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridApiEventHandler(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridApiOptionHandler(apiRef, 'columnResize', props.onColumnResize);\n  useGridApiOptionHandler(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};\nfunction updateProperty(element, property, delta) {\n  if (!element) {\n    return;\n  }\n  element.style[property] = `${parseInt(element.style[property], 10) + delta}px`;\n}"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAASC,sBAAsB,IAAIC,aAAa,EAAEC,yBAAyB,IAAIC,gBAAgB,QAAQ,YAAY;AACnH,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,2BAA2B,EAAEC,eAAe,EAAEC,2BAA2B,EAAEC,6BAA6B,EAAEC,sBAAsB,EAAEC,0BAA0B,EAAEC,gCAAgC,EAAEC,cAAc,EAAEC,aAAa,EAAEC,8BAA8B,EAAEC,6BAA6B,EAAEC,+BAA+B,QAAQ,yBAAyB;AACvW,SAASC,6BAA6B,QAAQ,uBAAuB;AACrE,SAASC,WAAW,QAAQ,gCAAgC;AAC5D,SAASC,sBAAsB,EAAEC,gBAAgB,EAAEC,uBAAuB,EAAEC,aAAa,EAAEC,0BAA0B,EAAEC,eAAe,EAAEC,UAAU,QAAQ,aAAa;AACvK,SAASC,uCAAuC,QAAQ,mBAAmB;AAC3E,SAASC,yBAAyB,QAAQ,0CAA0C;AACpF,SAASC,KAAK,QAAQ,sBAAsB;AAC5C,SAASC,UAAU,QAAQ,wBAAwB;AACnD,SAASC,wBAAwB,QAAQ,kCAAkC;AAC3E,SAASC,wBAAwB,QAAQ,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,6BAA6B,GAAG,KAAK;AACzC,SAASC,0BAA0BA,CAAA,EAAG;EACpC,IAAID,6BAA6B,KAAKE,SAAS,EAAE;IAC/C,IAAI,OAAOC,GAAG,KAAK,WAAW,IAAI,OAAOA,GAAG,CAACC,QAAQ,KAAK,UAAU,EAAE;MACpEJ,6BAA6B,GAAGG,GAAG,CAACC,QAAQ,CAAC,cAAc,EAAE,MAAM,CAAC;IACtE,CAAC,MAAM;MACLJ,6BAA6B,GAAG,IAAI;IACtC;EACF;EACA,OAAOA,6BAA6B;AACtC;AACA,SAASK,WAAWA,CAACC,KAAK,EAAEC,cAAc,EAAE;EAC1C,IAAIA,cAAc,KAAKL,SAAS,IAAII,KAAK,CAACE,cAAc,EAAE;IACxD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACE,cAAc,CAACE,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;MACvD,MAAME,KAAK,GAAGL,KAAK,CAACE,cAAc,CAACC,CAAC,CAAC;MACrC,IAAIE,KAAK,CAACC,UAAU,KAAKL,cAAc,EAAE;QACvC,OAAO;UACLM,CAAC,EAAEF,KAAK,CAACG,OAAO;UAChBC,CAAC,EAAEJ,KAAK,CAACK;QACX,CAAC;MACH;IACF;IACA,OAAO,KAAK;EACd;EACA,OAAO;IACLH,CAAC,EAAEP,KAAK,CAACQ,OAAO;IAChBC,CAAC,EAAET,KAAK,CAACU;EACX,CAAC;AACH;AACA,SAASC,eAAeA,CAACC,wBAAwB,EAAEC,MAAM,EAAEC,YAAY,EAAEC,eAAe,EAAE;EACxF,IAAIC,QAAQ,GAAGJ,wBAAwB;EACvC,IAAIG,eAAe,KAAK,OAAO,EAAE;IAC/BC,QAAQ,IAAIH,MAAM,GAAGC,YAAY,CAACG,IAAI;EACxC,CAAC,MAAM;IACLD,QAAQ,IAAIF,YAAY,CAACI,KAAK,GAAGL,MAAM;EACzC;EACA,OAAOG,QAAQ;AACjB;AACA,SAASG,wBAAwBA,CAACN,MAAM,EAAEC,YAAY,EAAEC,eAAe,EAAE;EACvE,IAAIA,eAAe,KAAK,MAAM,EAAE;IAC9B,OAAOF,MAAM,GAAGC,YAAY,CAACG,IAAI;EACnC;EACA,OAAOH,YAAY,CAACI,KAAK,GAAGL,MAAM;AACpC;AACA,SAASO,mBAAmBA,CAACC,IAAI,EAAE;EACjC,IAAIA,IAAI,KAAK,OAAO,EAAE;IACpB,OAAO,MAAM;EACf;EACA,OAAO,OAAO;AAChB;AACA,SAASC,kBAAkBA,CAACC,SAAS,EAAEC,SAAS,EAAE;EAChD,MAAMH,IAAI,GAAGE,SAAS,CAACE,SAAS,CAACC,QAAQ,CAAC9C,WAAW,CAAC,4BAA4B,CAAC,CAAC,GAAG,OAAO,GAAG,MAAM;EACvG,IAAI4C,SAAS,KAAK,KAAK,EAAE;IACvB;IACA,OAAOJ,mBAAmB,CAACC,IAAI,CAAC;EAClC;EACA,OAAOA,IAAI;AACb;AACA,SAASM,YAAYA,CAAC3B,KAAK,EAAE;EAC3BA,KAAK,CAAC4B,cAAc,CAAC,CAAC;EACtB5B,KAAK,CAAC6B,wBAAwB,CAAC,CAAC;AAClC;;AAEA;AACA;AACA;AACA;AACA,SAASC,+BAA+BA,CAACC,MAAM,EAAE;EAC/C,MAAMC,OAAO,GAAGvE,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC9B,MAAMC,QAAQ,GAAGA,CAAA,KAAM9C,uCAAuC,CAAC2C,MAAM,CAAC;EACtE,MAAMI,KAAK,GAAGjD,eAAe,CAAC6C,MAAM,EAAEG,QAAQ,CAAC;EAC/CzE,KAAK,CAAC2E,SAAS,CAAC,MAAM;IACpB,IAAIJ,OAAO,CAACK,OAAO,IAAIF,KAAK,KAAK,KAAK,EAAE;MACtCH,OAAO,CAACK,OAAO,CAACC,OAAO,CAAC,CAAC;MACzBN,OAAO,CAACK,OAAO,GAAGzC,SAAS;IAC7B;EACF,CAAC,CAAC;EACF,MAAM2C,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI,CAACP,OAAO,CAACK,OAAO,EAAE;MACpB,IAAIH,QAAQ,CAAC,CAAC,KAAK,KAAK,EAAE;QACxB,OAAOM,OAAO,CAACF,OAAO,CAAC,CAAC;MAC1B;MACAN,OAAO,CAACK,OAAO,GAAGhD,yBAAyB,CAAC,CAAC;IAC/C;IACA,OAAO2C,OAAO,CAACK,OAAO;EACxB,CAAC;EACD,OAAOE,UAAU;AACnB;;AAEA;AACA;AACA;AACA;AACA,SAASE,eAAeA,CAACC,WAAW,EAAEC,MAAM,EAAE;EAC5C,IAAID,WAAW,CAACtC,MAAM,GAAG,CAAC,EAAE;IAC1B,OAAOsC,WAAW;EACpB;EACA,MAAME,MAAM,GAAGF,WAAW,CAACG,KAAK,CAAC,CAAC;EAClCD,MAAM,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,CAAC;EAC5B,MAAMC,EAAE,GAAGL,MAAM,CAACM,IAAI,CAACC,KAAK,CAACP,MAAM,CAACxC,MAAM,GAAG,IAAI,CAAC,CAAC;EACnD,MAAMgD,EAAE,GAAGR,MAAM,CAACM,IAAI,CAACC,KAAK,CAACP,MAAM,CAACxC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;EACvD,MAAMiD,GAAG,GAAGD,EAAE,GAAGH,EAAE;;EAEnB;EACA;EACA;EACA;EACA;EACA,MAAMK,SAAS,GAAGD,GAAG,GAAG,CAAC,GAAG,CAAC,GAAGA,GAAG,GAAGV,MAAM;EAC5C,OAAOC,MAAM,CAACW,MAAM,CAACC,CAAC,IAAIA,CAAC,GAAGP,EAAE,GAAGK,SAAS,IAAIE,CAAC,GAAGJ,EAAE,GAAGE,SAAS,CAAC;AACrE;AACA,SAASG,mBAAmBA,CAAC1B,MAAM,EAAE2B,OAAO,EAAEC,OAAO,EAAE;EACrD,MAAMC,YAAY,GAAG,CAAC,CAAC;EACvB,MAAMC,IAAI,GAAG9B,MAAM,CAACM,OAAO,CAACyB,cAAc,CAACzB,OAAO;EAClDwB,IAAI,CAACpC,SAAS,CAACsC,GAAG,CAACnF,WAAW,CAACoF,UAAU,CAAC;EAC1CL,OAAO,CAACM,OAAO,CAACC,MAAM,IAAI;IACxB,MAAMC,KAAK,GAAG5F,aAAa,CAACwD,MAAM,CAACM,OAAO,EAAE6B,MAAM,CAACE,KAAK,CAAC;IACzD,MAAMC,MAAM,GAAGF,KAAK,CAACG,GAAG,CAACC,IAAI,IAAI;MAAA,IAAAC,qBAAA;MAC/B,QAAAA,qBAAA,GAAOD,IAAI,CAACE,qBAAqB,CAAC,CAAC,CAACC,KAAK,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,CAAC;IAChD,CAAC,CAAC;IACF,MAAMG,cAAc,GAAGjB,OAAO,CAACkB,eAAe,GAAGP,MAAM,GAAG5B,eAAe,CAAC4B,MAAM,EAAEX,OAAO,CAACmB,cAAc,CAAC;IACzG,IAAInB,OAAO,CAACoB,cAAc,EAAE;MAC1B,MAAMC,MAAM,GAAGzG,cAAc,CAACyD,MAAM,CAACM,OAAO,EAAE6B,MAAM,CAACE,KAAK,CAAC;MAC3D,IAAIW,MAAM,EAAE;QAAA,IAAAC,qBAAA,EAAAC,qBAAA;QACV,MAAMC,KAAK,GAAGH,MAAM,CAACI,aAAa,KAAAC,MAAA,CAAKxG,WAAW,CAACyG,iBAAiB,CAAE,CAAC;QACvE,MAAMC,OAAO,GAAGP,MAAM,CAACI,aAAa,KAAAC,MAAA,CAAKxG,WAAW,CAAC2G,iCAAiC,CAAE,CAAC;QACzF,MAAMC,aAAa,GAAGT,MAAM,CAACI,aAAa,KAAAC,MAAA,CAAKxG,WAAW,CAAC6G,mBAAmB,CAAE,CAAC;QACjF,MAAMC,aAAa,GAAGX,MAAM,CAACI,aAAa,KAAAC,MAAA,CAAKxG,WAAW,CAAC+G,QAAQ,CAAE,CAAC;QACtE,MAAMC,OAAO,GAAGV,KAAK,aAALA,KAAK,cAALA,KAAK,GAAII,OAAO;QAChC,MAAMO,KAAK,GAAGC,MAAM,CAACC,gBAAgB,CAAChB,MAAM,EAAE,IAAI,CAAC;QACnD,MAAMiB,YAAY,GAAGC,QAAQ,CAACJ,KAAK,CAACK,WAAW,EAAE,EAAE,CAAC,GAAGD,QAAQ,CAACJ,KAAK,CAACM,YAAY,EAAE,EAAE,CAAC;QACvF,MAAMC,YAAY,GAAGR,OAAO,CAACS,WAAW,GAAG,CAAC;QAC5C,MAAM3B,KAAK,GAAG0B,YAAY,GAAGJ,YAAY,KAAAhB,qBAAA,GAAIQ,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEc,WAAW,cAAAtB,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC,KAAAC,qBAAA,GAAIS,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEY,WAAW,cAAArB,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;QACjHN,cAAc,CAAC4B,IAAI,CAAC7B,KAAK,CAAC;MAC5B;IACF;IACA,MAAM8B,YAAY,GAAGtC,MAAM,CAACuC,QAAQ,KAAK,CAACC,QAAQ,IAAIxC,MAAM,CAACuC,QAAQ,KAAK7G,SAAS;IACnF,MAAM+G,YAAY,GAAGzC,MAAM,CAAC0C,QAAQ,KAAKF,QAAQ,IAAIxC,MAAM,CAAC0C,QAAQ,KAAKhH,SAAS;IAClF,MAAMiH,GAAG,GAAGL,YAAY,GAAGtC,MAAM,CAACuC,QAAQ,GAAG,CAAC;IAC9C,MAAMK,GAAG,GAAGH,YAAY,GAAGzC,MAAM,CAAC0C,QAAQ,GAAGF,QAAQ;IACrD,MAAMK,UAAU,GAAGpC,cAAc,CAACvE,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG8C,IAAI,CAAC4D,GAAG,CAAC,GAAGnC,cAAc,CAAC;IAChFf,YAAY,CAACM,MAAM,CAACE,KAAK,CAAC,GAAG9E,KAAK,CAACyH,UAAU,EAAEF,GAAG,EAAEC,GAAG,CAAC;EAC1D,CAAC,CAAC;EACFjD,IAAI,CAACpC,SAAS,CAACuF,MAAM,CAACpI,WAAW,CAACoF,UAAU,CAAC;EAC7C,OAAOJ,YAAY;AACrB;AACA,OAAO,MAAMqD,4BAA4B,GAAGC,KAAK,IAAI1J,QAAQ,CAAC,CAAC,CAAC,EAAE0J,KAAK,EAAE;EACvEC,YAAY,EAAE;IACZC,mBAAmB,EAAE;EACvB;AACF,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA,OAAO,MAAMC,mBAAmB,GAAGA,CAACtF,MAAM,EAAEuF,KAAK,KAAK;EACpD,MAAMC,KAAK,GAAGzJ,QAAQ,CAAC,CAAC;EACxB,MAAM0J,MAAM,GAAGxI,aAAa,CAAC+C,MAAM,EAAE,qBAAqB,CAAC;EAC3D,MAAM0F,SAAS,GAAGhK,KAAK,CAACwE,MAAM,CAAC,CAAC;EAChC,MAAMyF,uBAAuB,GAAGjK,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC9C,MAAM0F,sBAAsB,GAAGlK,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC7C,MAAM2F,sBAAsB,GAAGnK,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC7C,MAAM4F,sBAAsB,GAAGpK,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;EAC/C,MAAM6F,eAAe,GAAGrK,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;EACxC,MAAM8F,uBAAuB,GAAGtK,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;EAChD,MAAM+F,yBAAyB,GAAGvK,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;EAClD,MAAMgG,aAAa,GAAGxK,KAAK,CAACwE,MAAM,CAAC,CAAC;EACpC,MAAMiG,cAAc,GAAGzK,KAAK,CAACwE,MAAM,CAAC,CAAC;EACrC,MAAMkG,yBAAyB,GAAG1K,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;EAClD,MAAMmG,2BAA2B,GAAG3K,KAAK,CAACwE,MAAM,CAAC,EAAE,CAAC;;EAEpD;EACA;EACA;EACA,MAAMrB,wBAAwB,GAAGnD,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC/C,MAAMlB,eAAe,GAAGtD,KAAK,CAACwE,MAAM,CAAC,CAAC;EACtC,MAAMoG,sBAAsB,GAAG9I,UAAU,CAAC,CAAC;EAC3C,MAAM+I,OAAO,GAAG7K,KAAK,CAACwE,MAAM,CAAC,CAAC;EAC9B,MAAMsG,WAAW,GAAGvH,QAAQ,IAAI;IAC9BwG,MAAM,CAACgB,KAAK,sBAAApD,MAAA,CAAsBpE,QAAQ,eAAAoE,MAAA,CAAYqC,SAAS,CAACpF,OAAO,CAAC+B,KAAK,CAAE,CAAC;IAChF,MAAMqE,SAAS,GAAGd,sBAAsB,CAACtF,OAAO,CAACqG,WAAW;IAC5D,MAAMC,SAAS,GAAG3H,QAAQ,GAAGyH,SAAS;IACtChB,SAAS,CAACpF,OAAO,CAACuG,aAAa,GAAG5H,QAAQ;IAC1CyG,SAAS,CAACpF,OAAO,CAACqC,KAAK,GAAG1D,QAAQ;IAClCyG,SAAS,CAACpF,OAAO,CAACwG,IAAI,GAAG,CAAC;IAC1BlB,sBAAsB,CAACtF,OAAO,CAACwD,KAAK,CAACnB,KAAK,MAAAU,MAAA,CAAMpE,QAAQ,OAAI;IAC5D2G,sBAAsB,CAACtF,OAAO,CAACwD,KAAK,CAACY,QAAQ,MAAArB,MAAA,CAAMpE,QAAQ,OAAI;IAC/D2G,sBAAsB,CAACtF,OAAO,CAACwD,KAAK,CAACe,QAAQ,MAAAxB,MAAA,CAAMpE,QAAQ,OAAI;IAC/D,MAAM8H,mBAAmB,GAAGlB,sBAAsB,CAACvF,OAAO;IAC1D,IAAIyG,mBAAmB,EAAE;MACvBA,mBAAmB,CAACjD,KAAK,CAACnB,KAAK,MAAAU,MAAA,CAAMpE,QAAQ,OAAI;MACjD8H,mBAAmB,CAACjD,KAAK,CAACY,QAAQ,MAAArB,MAAA,CAAMpE,QAAQ,OAAI;MACpD8H,mBAAmB,CAACjD,KAAK,CAACe,QAAQ,MAAAxB,MAAA,CAAMpE,QAAQ,OAAI;IACtD;IACA6G,sBAAsB,CAACxF,OAAO,CAAC4B,OAAO,CAAC2B,OAAO,IAAI;MAChD,MAAMmD,GAAG,GAAGnD,OAAO;MACnB,IAAIoD,UAAU;MACd,IAAID,GAAG,CAACE,YAAY,CAAC,cAAc,CAAC,KAAK,GAAG,EAAE;QAC5CD,UAAU,MAAA5D,MAAA,CAAMpE,QAAQ,OAAI;MAC9B,CAAC,MAAM;QACL;QACA;QACAgI,UAAU,MAAA5D,MAAA,CAAM2D,GAAG,CAACL,WAAW,GAAGC,SAAS,OAAI;MACjD;MACAI,GAAG,CAAClD,KAAK,CAACnB,KAAK,GAAGsE,UAAU;MAC5BD,GAAG,CAAClD,KAAK,CAACY,QAAQ,GAAGuC,UAAU;MAC/BD,GAAG,CAAClD,KAAK,CAACe,QAAQ,GAAGoC,UAAU;IACjC,CAAC,CAAC;IACFlB,eAAe,CAACzF,OAAO,CAAC4B,OAAO,CAAC2B,OAAO,IAAI;MACzC,MAAMmD,GAAG,GAAGnD,OAAO;MACnB,IAAIoD,UAAU;MACd,IAAID,GAAG,CAACE,YAAY,CAAC,cAAc,CAAC,KAAK,GAAG,EAAE;QAC5CD,UAAU,MAAA5D,MAAA,CAAMpE,QAAQ,OAAI;MAC9B,CAAC,MAAM;QACL;QACA;QACAgI,UAAU,MAAA5D,MAAA,CAAM2D,GAAG,CAACL,WAAW,GAAGC,SAAS,OAAI;MACjD;MACAI,GAAG,CAAClD,KAAK,CAACqD,WAAW,CAAC,SAAS,EAAEF,UAAU,CAAC;IAC9C,CAAC,CAAC;IACF,MAAMG,cAAc,GAAGpH,MAAM,CAACM,OAAO,CAAC+G,4BAA4B,CAAC,gBAAgB,EAAE,KAAK,EAAE3B,SAAS,CAACpF,OAAO,CAAC+B,KAAK,CAAC;IACpH,IAAI+E,cAAc,KAAK3J,wBAAwB,CAAC6J,IAAI,EAAE;MACpDC,cAAc,CAACrB,aAAa,CAAC5F,OAAO,EAAE,OAAO,EAAEsG,SAAS,CAAC;MACzDZ,uBAAuB,CAAC1F,OAAO,CAAC4B,OAAO,CAACM,IAAI,IAAI;QAC9C+E,cAAc,CAAC/E,IAAI,EAAE,MAAM,EAAEoE,SAAS,CAAC;MACzC,CAAC,CAAC;MACFR,yBAAyB,CAAC9F,OAAO,CAAC4B,OAAO,CAACc,MAAM,IAAI;QAClDuE,cAAc,CAACvE,MAAM,EAAE,MAAM,EAAE4D,SAAS,CAAC;MAC3C,CAAC,CAAC;IACJ;IACA,IAAIQ,cAAc,KAAK3J,wBAAwB,CAAC+J,KAAK,EAAE;MACrDD,cAAc,CAACpB,cAAc,CAAC7F,OAAO,EAAE,OAAO,EAAEsG,SAAS,CAAC;MAC1DX,yBAAyB,CAAC3F,OAAO,CAAC4B,OAAO,CAACM,IAAI,IAAI;QAChD+E,cAAc,CAAC/E,IAAI,EAAE,OAAO,EAAEoE,SAAS,CAAC;MAC1C,CAAC,CAAC;MACFP,2BAA2B,CAAC/F,OAAO,CAAC4B,OAAO,CAACc,MAAM,IAAI;QACpDuE,cAAc,CAACvE,MAAM,EAAE,OAAO,EAAE4D,SAAS,CAAC;MAC5C,CAAC,CAAC;IACJ;EACF,CAAC;EACD,MAAMa,YAAY,GAAGC,WAAW,IAAI;IAClC;IACAC,aAAa,CAAC,CAAC;;IAEf;IACA,IAAIhC,uBAAuB,CAACrF,OAAO,EAAE;MACnC,MAAMsH,SAAS,GAAGjC,uBAAuB,CAACrF,OAAO;MACjD,MAAMuH,aAAa,GAAGD,SAAS,CAACE,SAAS;MACzC,MAAMC,WAAW,GAAGH,SAAS,CAACnJ,OAAO;MACrC,MAAMuJ,WAAW,GAAGJ,SAAS,CAACjJ,OAAO;;MAErC;MACA,IAAI+I,WAAW,CAACI,SAAS,GAAGD,aAAa,GAAG,GAAG,IAAIH,WAAW,CAACjJ,OAAO,KAAKsJ,WAAW,IAAIL,WAAW,CAAC/I,OAAO,KAAKqJ,WAAW,EAAE;QAC7HrC,uBAAuB,CAACrF,OAAO,GAAGzC,SAAS;QAC3C;MACF;IACF;IACA,IAAI6H,SAAS,CAACpF,OAAO,EAAE;MACrBN,MAAM,CAACM,OAAO,CAAC2H,cAAc,CAACvC,SAAS,CAACpF,OAAO,CAAC+B,KAAK,EAAEqD,SAAS,CAACpF,OAAO,CAACqC,KAAK,CAAC;MAC/E8C,MAAM,CAACgB,KAAK,iBAAApD,MAAA,CAAiBqC,SAAS,CAACpF,OAAO,CAAC+B,KAAK,uBAAAgB,MAAA,CAAoBqC,SAAS,CAACpF,OAAO,CAACqC,KAAK,CAAE,CAAC;IACpG;IACA2D,sBAAsB,CAAC4B,KAAK,CAAC,CAAC,EAAE,MAAM;MACpClI,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,kBAAkB,EAAE,IAAI,EAAET,WAAW,CAAC;IACpE,CAAC,CAAC;EACJ,CAAC;EACD,MAAMU,eAAe,GAAGA,CAACC,MAAM,EAAE7I,SAAS,EAAE8I,MAAM,KAAK;IAAA,IAAAC,qBAAA;IACrD,MAAMzG,IAAI,GAAG9B,MAAM,CAACM,OAAO,CAACyB,cAAc,CAACzB,OAAO;IAClDoF,SAAS,CAACpF,OAAO,GAAG+H,MAAM;IAC1BzC,sBAAsB,CAACtF,OAAO,GAAGjE,0BAA0B,CAAC2D,MAAM,CAACM,OAAO,CAACkI,yBAAyB,CAAClI,OAAO,EAAE+H,MAAM,CAAChG,KAAK,CAAC;IAC3H,MAAM0E,mBAAmB,GAAGjF,IAAI,CAACsB,aAAa,KAAAC,MAAA,CAAKxG,WAAW,CAAC4L,eAAe,qBAAApF,MAAA,CAAiBgF,MAAM,CAAChG,KAAK,QAAI,CAAC;IAChH,IAAI0E,mBAAmB,EAAE;MACvBlB,sBAAsB,CAACvF,OAAO,GAAGyG,mBAAmB;IACtD;IACAjB,sBAAsB,CAACxF,OAAO,GAAGhE,gCAAgC,EAAAiM,qBAAA,GAACvI,MAAM,CAACM,OAAO,CAACkI,yBAAyB,cAAAD,qBAAA,uBAAxCA,qBAAA,CAA0CjI,OAAO,EAAE+H,MAAM,CAAChG,KAAK,CAAC;IAClI0D,eAAe,CAACzF,OAAO,GAAGtE,2BAA2B,CAAC4J,sBAAsB,CAACtF,OAAO,EAAEN,MAAM,CAACM,OAAO,CAAC;IACrG4F,aAAa,CAAC5F,OAAO,GAAGrE,eAAe,CAAC+D,MAAM,CAACM,OAAO,EAAE,oBAAoB,CAAC;IAC7E6F,cAAc,CAAC7F,OAAO,GAAGrE,eAAe,CAAC+D,MAAM,CAACM,OAAO,EAAE,qBAAqB,CAAC;IAC/E,MAAM8G,cAAc,GAAGpH,MAAM,CAACM,OAAO,CAAC+G,4BAA4B,CAAC,gBAAgB,EAAE,KAAK,EAAE3B,SAAS,CAACpF,OAAO,CAAC+B,KAAK,CAAC;IACpH2D,uBAAuB,CAAC1F,OAAO,GAAG8G,cAAc,KAAK3J,wBAAwB,CAAC6J,IAAI,GAAG,EAAE,GAAGpL,2BAA2B,CAAC8D,MAAM,CAACM,OAAO,EAAEsF,sBAAsB,CAACtF,OAAO,CAAC;IACrK2F,yBAAyB,CAAC3F,OAAO,GAAG8G,cAAc,KAAK3J,wBAAwB,CAAC+J,KAAK,GAAG,EAAE,GAAGrL,6BAA6B,CAAC6D,MAAM,CAACM,OAAO,EAAEsF,sBAAsB,CAACtF,OAAO,CAAC;IAC1K8F,yBAAyB,CAAC9F,OAAO,GAAG8G,cAAc,KAAK3J,wBAAwB,CAAC6J,IAAI,GAAG,EAAE,GAAG5K,6BAA6B,CAACsD,MAAM,CAACM,OAAO,EAAEsF,sBAAsB,CAACtF,OAAO,CAAC;IACzK+F,2BAA2B,CAAC/F,OAAO,GAAG8G,cAAc,KAAK3J,wBAAwB,CAAC+J,KAAK,GAAG,EAAE,GAAG7K,+BAA+B,CAACqD,MAAM,CAACM,OAAO,EAAEsF,sBAAsB,CAACtF,OAAO,CAAC;IAC9KtB,eAAe,CAACsB,OAAO,GAAGf,kBAAkB,CAACC,SAAS,EAAEgG,KAAK,CAAC/F,SAAS,CAAC;IACxEZ,wBAAwB,CAACyB,OAAO,GAAGlB,wBAAwB,CAACkJ,MAAM,EAAE1C,sBAAsB,CAACtF,OAAO,CAACoC,qBAAqB,CAAC,CAAC,EAAE1D,eAAe,CAACsB,OAAO,CAAC;EACtJ,CAAC;EACD,MAAMoI,mBAAmB,GAAG5M,gBAAgB,CAAC2L,YAAY,CAAC;EAC1D,MAAMkB,qBAAqB,GAAG7M,gBAAgB,CAAC4L,WAAW,IAAI;IAC5D;IACA,IAAIA,WAAW,CAACkB,OAAO,KAAK,CAAC,EAAE;MAC7BF,mBAAmB,CAAChB,WAAW,CAAC;MAChC;IACF;IACA,IAAIzI,QAAQ,GAAGL,eAAe,CAACC,wBAAwB,CAACyB,OAAO,EAAEoH,WAAW,CAACjJ,OAAO,EAAEmH,sBAAsB,CAACtF,OAAO,CAACoC,qBAAqB,CAAC,CAAC,EAAE1D,eAAe,CAACsB,OAAO,CAAC;IACtKrB,QAAQ,GAAG1B,KAAK,CAAC0B,QAAQ,EAAEyG,SAAS,CAACpF,OAAO,CAACoE,QAAQ,EAAEgB,SAAS,CAACpF,OAAO,CAACuE,QAAQ,CAAC;IAClF2B,WAAW,CAACvH,QAAQ,CAAC;IACrB,MAAM4J,MAAM,GAAG;MACbhF,OAAO,EAAE+B,sBAAsB,CAACtF,OAAO;MACvC+H,MAAM,EAAE3C,SAAS,CAACpF,OAAO;MACzBqC,KAAK,EAAE1D;IACT,CAAC;IACDe,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,cAAc,EAAEU,MAAM,EAAEnB,WAAW,CAAC;EAClE,CAAC,CAAC;EACF,MAAMoB,cAAc,GAAGhN,gBAAgB,CAAC4L,WAAW,IAAI;IACrD,MAAMqB,MAAM,GAAG/K,WAAW,CAAC0J,WAAW,EAAEnB,OAAO,CAACjG,OAAO,CAAC;IACxD,IAAI,CAACyI,MAAM,EAAE;MACX;IACF;IACAtB,YAAY,CAACC,WAAW,CAAC;EAC3B,CAAC,CAAC;EACF,MAAMsB,eAAe,GAAGlN,gBAAgB,CAAC4L,WAAW,IAAI;IACtD,MAAMqB,MAAM,GAAG/K,WAAW,CAAC0J,WAAW,EAAEnB,OAAO,CAACjG,OAAO,CAAC;IACxD,IAAI,CAACyI,MAAM,EAAE;MACX;IACF;;IAEA;IACA,IAAIrB,WAAW,CAACuB,IAAI,KAAK,WAAW,IAAIvB,WAAW,CAACkB,OAAO,KAAK,CAAC,EAAE;MACjEE,cAAc,CAACpB,WAAW,CAAC;MAC3B;IACF;IACA,IAAIzI,QAAQ,GAAGL,eAAe,CAACC,wBAAwB,CAACyB,OAAO,EAAEyI,MAAM,CAACvK,CAAC,EAAEoH,sBAAsB,CAACtF,OAAO,CAACoC,qBAAqB,CAAC,CAAC,EAAE1D,eAAe,CAACsB,OAAO,CAAC;IAC3JrB,QAAQ,GAAG1B,KAAK,CAAC0B,QAAQ,EAAEyG,SAAS,CAACpF,OAAO,CAACoE,QAAQ,EAAEgB,SAAS,CAACpF,OAAO,CAACuE,QAAQ,CAAC;IAClF2B,WAAW,CAACvH,QAAQ,CAAC;IACrB,MAAM4J,MAAM,GAAG;MACbhF,OAAO,EAAE+B,sBAAsB,CAACtF,OAAO;MACvC+H,MAAM,EAAE3C,SAAS,CAACpF,OAAO;MACzBqC,KAAK,EAAE1D;IACT,CAAC;IACDe,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,cAAc,EAAEU,MAAM,EAAEnB,WAAW,CAAC;EAClE,CAAC,CAAC;EACF,MAAMwB,gBAAgB,GAAGpN,gBAAgB,CAACmC,KAAK,IAAI;IACjD,MAAMkL,aAAa,GAAG1M,8BAA8B,CAACwB,KAAK,CAACmL,MAAM,EAAEvM,WAAW,CAAC,4BAA4B,CAAC,CAAC;IAC7G;IACA,IAAI,CAACsM,aAAa,EAAE;MAClB;IACF;IACA;IACA,IAAI,CAACvL,0BAA0B,CAAC,CAAC,EAAE;MACjCK,KAAK,CAAC4B,cAAc,CAAC,CAAC;IACxB;IACA,MAAMvB,KAAK,GAAGL,KAAK,CAACE,cAAc,CAAC,CAAC,CAAC;IACrC,IAAIG,KAAK,IAAI,IAAI,EAAE;MACjB;MACAiI,OAAO,CAACjG,OAAO,GAAGhC,KAAK,CAACC,UAAU;IACpC;IACA,MAAM8K,mBAAmB,GAAG5M,8BAA8B,CAACwB,KAAK,CAACmL,MAAM,EAAEvM,WAAW,CAACyM,YAAY,CAAC;IAClG,MAAMjH,KAAK,GAAGjG,sBAAsB,CAACiN,mBAAmB,CAAC;IACzD,MAAMhB,MAAM,GAAGrI,MAAM,CAACM,OAAO,CAACiJ,SAAS,CAAClH,KAAK,CAAC;IAC9CoD,MAAM,CAACgB,KAAK,wBAAApD,MAAA,CAAwBgF,MAAM,CAAChG,KAAK,CAAE,CAAC;IACnDrC,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,mBAAmB,EAAE;MAC/C9F;IACF,CAAC,EAAEpE,KAAK,CAAC;IACTmK,eAAe,CAACC,MAAM,EAAEc,aAAa,EAAE7K,KAAK,CAACG,OAAO,CAAC;IACrD,MAAM+K,GAAG,GAAG5N,aAAa,CAACqC,KAAK,CAACwL,aAAa,CAAC;IAC9CD,GAAG,CAACE,gBAAgB,CAAC,WAAW,EAAEV,eAAe,CAAC;IAClDQ,GAAG,CAACE,gBAAgB,CAAC,UAAU,EAAEZ,cAAc,CAAC;EAClD,CAAC,CAAC;EACF,MAAMnB,aAAa,GAAGjM,KAAK,CAACiO,WAAW,CAAC,MAAM;IAC5C,MAAMH,GAAG,GAAG5N,aAAa,CAACoE,MAAM,CAACM,OAAO,CAACyB,cAAc,CAACzB,OAAO,CAAC;IAChEkJ,GAAG,CAACI,IAAI,CAAC9F,KAAK,CAAC+F,cAAc,CAAC,QAAQ,CAAC;IACvCL,GAAG,CAACM,mBAAmB,CAAC,WAAW,EAAEnB,qBAAqB,CAAC;IAC3Da,GAAG,CAACM,mBAAmB,CAAC,SAAS,EAAEpB,mBAAmB,CAAC;IACvDc,GAAG,CAACM,mBAAmB,CAAC,WAAW,EAAEd,eAAe,CAAC;IACrDQ,GAAG,CAACM,mBAAmB,CAAC,UAAU,EAAEhB,cAAc,CAAC;IACnD;IACA;IACAiB,UAAU,CAAC,MAAM;MACfP,GAAG,CAACM,mBAAmB,CAAC,OAAO,EAAElK,YAAY,EAAE,IAAI,CAAC;IACtD,CAAC,EAAE,GAAG,CAAC;IACP,IAAIgG,sBAAsB,CAACtF,OAAO,EAAE;MAClCsF,sBAAsB,CAACtF,OAAO,CAACwD,KAAK,CAACkG,aAAa,GAAG,OAAO;IAC9D;EACF,CAAC,EAAE,CAAChK,MAAM,EAAE4F,sBAAsB,EAAE+C,qBAAqB,EAAED,mBAAmB,EAAEM,eAAe,EAAEF,cAAc,CAAC,CAAC;EACjH,MAAMmB,iBAAiB,GAAGvO,KAAK,CAACiO,WAAW,CAACO,IAAA,IAEtC;IAAA,IAFuC;MAC3C7H;IACF,CAAC,GAAA6H,IAAA;IACClK,MAAM,CAACM,OAAO,CAAC6J,QAAQ,CAAChF,KAAK,IAAI1J,QAAQ,CAAC,CAAC,CAAC,EAAE0J,KAAK,EAAE;MACnDC,YAAY,EAAE3J,QAAQ,CAAC,CAAC,CAAC,EAAE0J,KAAK,CAACC,YAAY,EAAE;QAC7CC,mBAAmB,EAAEhD;MACvB,CAAC;IACH,CAAC,CAAC,CAAC;IACHrC,MAAM,CAACM,OAAO,CAAC8J,WAAW,CAAC,CAAC;EAC9B,CAAC,EAAE,CAACpK,MAAM,CAAC,CAAC;EACZ,MAAMqK,gBAAgB,GAAG3O,KAAK,CAACiO,WAAW,CAAC,MAAM;IAC/C3J,MAAM,CAACM,OAAO,CAAC6J,QAAQ,CAAChF,KAAK,IAAI1J,QAAQ,CAAC,CAAC,CAAC,EAAE0J,KAAK,EAAE;MACnDC,YAAY,EAAE3J,QAAQ,CAAC,CAAC,CAAC,EAAE0J,KAAK,CAACC,YAAY,EAAE;QAC7CC,mBAAmB,EAAE;MACvB,CAAC;IACH,CAAC,CAAC,CAAC;IACHrF,MAAM,CAACM,OAAO,CAAC8J,WAAW,CAAC,CAAC;EAC9B,CAAC,EAAE,CAACpK,MAAM,CAAC,CAAC;EACZ,MAAMsK,2BAA2B,GAAGxO,gBAAgB,CAAC,CAAAyO,KAAA,EAElDtM,KAAK,KAAK;IAAA,IAFyC;MACpDoK;IACF,CAAC,GAAAkC,KAAA;IACC;IACA,IAAItM,KAAK,CAACuM,MAAM,KAAK,CAAC,EAAE;MACtB;IACF;;IAEA;IACA,IAAI,CAACvM,KAAK,CAACwL,aAAa,CAAC/J,SAAS,CAACC,QAAQ,CAAC9C,WAAW,CAAC,4BAA4B,CAAC,CAAC,EAAE;MACtF;IACF;;IAEA;IACAoB,KAAK,CAAC4B,cAAc,CAAC,CAAC;IACtB4F,MAAM,CAACgB,KAAK,wBAAApD,MAAA,CAAwBgF,MAAM,CAAChG,KAAK,CAAE,CAAC;IACnDrC,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,mBAAmB,EAAE;MAC/C9F,KAAK,EAAEgG,MAAM,CAAChG;IAChB,CAAC,EAAEpE,KAAK,CAAC;IACTmK,eAAe,CAACC,MAAM,EAAEpK,KAAK,CAACwL,aAAa,EAAExL,KAAK,CAACQ,OAAO,CAAC;IAC3D,MAAM+K,GAAG,GAAG5N,aAAa,CAACoE,MAAM,CAACM,OAAO,CAACyB,cAAc,CAACzB,OAAO,CAAC;IAChEkJ,GAAG,CAACI,IAAI,CAAC9F,KAAK,CAAC2G,MAAM,GAAG,YAAY;IACpC9E,uBAAuB,CAACrF,OAAO,GAAGrC,KAAK,CAACyJ,WAAW;IACnD8B,GAAG,CAACE,gBAAgB,CAAC,WAAW,EAAEf,qBAAqB,CAAC;IACxDa,GAAG,CAACE,gBAAgB,CAAC,SAAS,EAAEhB,mBAAmB,CAAC;;IAEpD;IACA;IACAc,GAAG,CAACE,gBAAgB,CAAC,OAAO,EAAE9J,YAAY,EAAE,IAAI,CAAC;EACnD,CAAC,CAAC;EACF,MAAM8K,gCAAgC,GAAG5O,gBAAgB,CAAC,CAAC+M,MAAM,EAAE5K,KAAK,KAAK;IAC3E,IAAIsH,KAAK,CAACoF,eAAe,EAAE;MACzB;IACF;;IAEA;IACA,IAAI1M,KAAK,CAACuM,MAAM,KAAK,CAAC,EAAE;MACtB;IACF;IACA,MAAMrI,MAAM,GAAGnC,MAAM,CAACM,OAAO,CAAC6E,KAAK,CAACvD,OAAO,CAACgJ,MAAM,CAAC/B,MAAM,CAACxG,KAAK,CAAC;IAChE,IAAIF,MAAM,CAAC0I,SAAS,KAAK,KAAK,EAAE;MAC9B;IACF;IACA7K,MAAM,CAACM,OAAO,CAACwK,eAAe,CAACrP,QAAQ,CAAC,CAAC,CAAC,EAAE8J,KAAK,CAACwF,eAAe,EAAE;MACjEnJ,OAAO,EAAE,CAACO,MAAM,CAACE,KAAK;IACxB,CAAC,CAAC,CAAC;EACL,CAAC,CAAC;;EAEF;AACF;AACA;;EAEE,MAAM2I,4BAA4B,GAAGjL,+BAA+B,CAACC,MAAM,CAAC;EAC5E,MAAMiL,eAAe,GAAGvP,KAAK,CAACwE,MAAM,CAAC,KAAK,CAAC;EAC3C,MAAM4K,eAAe,GAAGpP,KAAK,CAACiO,WAAW,CAAC,MAAMuB,WAAW,IAAI;IAAA,IAAAC,qBAAA,EAAAC,oBAAA;IAC7D,MAAMtJ,IAAI,IAAAqJ,qBAAA,GAAGnL,MAAM,CAACM,OAAO,CAACyB,cAAc,cAAAoJ,qBAAA,uBAA7BA,qBAAA,CAA+B7K,OAAO;IACnD,IAAI,CAACwB,IAAI,EAAE;MACT;IACF;IACA,IAAImJ,eAAe,CAAC3K,OAAO,EAAE;MAC3B;IACF;IACA2K,eAAe,CAAC3K,OAAO,GAAG,IAAI;IAC9B,MAAM6E,KAAK,GAAGzH,wBAAwB,CAACsC,MAAM,CAACM,OAAO,CAAC6E,KAAK,CAAC;IAC5D,MAAMxD,OAAO,GAAGlG,QAAQ,CAAC,CAAC,CAAC,EAAEmB,6BAA6B,EAAEsO,WAAW,EAAE;MACvEtJ,OAAO,GAAAwJ,oBAAA,GAAEF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEtJ,OAAO,cAAAwJ,oBAAA,cAAAA,oBAAA,GAAIjG,KAAK,CAACkG;IACzC,CAAC,CAAC;IACF1J,OAAO,CAACC,OAAO,GAAGD,OAAO,CAACC,OAAO,CAACJ,MAAM,CAAC8J,CAAC,IAAInG,KAAK,CAACoG,qBAAqB,CAACD,CAAC,CAAC,KAAK,KAAK,CAAC;IACvF,MAAM1J,OAAO,GAAGD,OAAO,CAACC,OAAO,CAACW,GAAG,CAAC+I,CAAC,IAAItL,MAAM,CAACM,OAAO,CAAC6E,KAAK,CAACvD,OAAO,CAACgJ,MAAM,CAACU,CAAC,CAAC,CAAC;IAChF,IAAI;MACFtL,MAAM,CAACM,OAAO,CAACkL,gCAAgC,CAAC,KAAK,CAAC;MACtD,MAAMR,4BAA4B,CAAC,CAAC;MACpC,MAAMnJ,YAAY,GAAGH,mBAAmB,CAAC1B,MAAM,EAAE2B,OAAO,EAAEC,OAAO,CAAC;MAClE,MAAM6J,UAAU,GAAG7J,OAAO,CAACW,GAAG,CAACJ,MAAM,IAAI1G,QAAQ,CAAC,CAAC,CAAC,EAAE0G,MAAM,EAAE;QAC5DQ,KAAK,EAAEd,YAAY,CAACM,MAAM,CAACE,KAAK,CAAC;QACjCwE,aAAa,EAAEhF,YAAY,CAACM,MAAM,CAACE,KAAK;MAC1C,CAAC,CAAC,CAAC;MACH,IAAIV,OAAO,CAAC+J,MAAM,EAAE;QAClB,MAAMC,cAAc,GAAGxG,KAAK,CAACkG,aAAa,CAAC9I,GAAG,CAACF,KAAK,IAAI8C,KAAK,CAACyF,MAAM,CAACvI,KAAK,CAAC,CAAC,CAACb,MAAM,CAAC8J,CAAC,IAAInG,KAAK,CAACoG,qBAAqB,CAACD,CAAC,CAACjJ,KAAK,CAAC,KAAK,KAAK,CAAC;QACxI,MAAMuJ,UAAU,GAAGD,cAAc,CAACE,MAAM,CAAC,CAACC,KAAK,EAAE3J,MAAM;UAAA,IAAA4J,KAAA,EAAAC,qBAAA;UAAA,OAAKF,KAAK,KAAAC,KAAA,IAAAC,qBAAA,GAAInK,YAAY,CAACM,MAAM,CAACE,KAAK,CAAC,cAAA2J,qBAAA,cAAAA,qBAAA,GAAI7J,MAAM,CAAC0E,aAAa,cAAAkF,KAAA,cAAAA,KAAA,GAAI5J,MAAM,CAACQ,KAAK,CAAC;QAAA,GAAE,CAAC,CAAC;QAC5I,MAAMsJ,cAAc,GAAGjM,MAAM,CAACM,OAAO,CAAC4L,iBAAiB,CAAC,CAAC,CAACC,iBAAiB,CAACxJ,KAAK;QACjF,MAAMyJ,cAAc,GAAGH,cAAc,GAAGL,UAAU;QAClD,IAAIQ,cAAc,GAAG,CAAC,EAAE;UACtB,MAAMC,cAAc,GAAGD,cAAc,IAAIX,UAAU,CAACpN,MAAM,IAAI,CAAC,CAAC;UAChEoN,UAAU,CAACvJ,OAAO,CAACC,MAAM,IAAI;YAC3BA,MAAM,CAACQ,KAAK,IAAI0J,cAAc;YAC9BlK,MAAM,CAAC0E,aAAa,IAAIwF,cAAc;UACxC,CAAC,CAAC;QACJ;MACF;MACArM,MAAM,CAACM,OAAO,CAACgM,aAAa,CAACb,UAAU,CAAC;MACxCA,UAAU,CAACvJ,OAAO,CAAC,CAACqK,SAAS,EAAEC,KAAK,KAAK;QACvC,IAAID,SAAS,CAAC5J,KAAK,KAAKf,OAAO,CAAC4K,KAAK,CAAC,CAAC7J,KAAK,EAAE;UAC5C,MAAMA,KAAK,GAAG4J,SAAS,CAAC5J,KAAK;UAC7B3C,MAAM,CAACM,OAAO,CAAC6H,YAAY,CAAC,mBAAmB,EAAE;YAC/CtE,OAAO,EAAE7D,MAAM,CAACM,OAAO,CAACmM,sBAAsB,CAACF,SAAS,CAAClK,KAAK,CAAC;YAC/DgG,MAAM,EAAEkE,SAAS;YACjB5J;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC,SAAS;MACR3C,MAAM,CAACM,OAAO,CAACkL,gCAAgC,CAAC,IAAI,CAAC;MACrDP,eAAe,CAAC3K,OAAO,GAAG,KAAK;IACjC;EACF,CAAC,EAAE,CAACN,MAAM,EAAEgL,4BAA4B,CAAC,CAAC;;EAE1C;AACF;AACA;;EAEEtP,KAAK,CAAC2E,SAAS,CAAC,MAAMsH,aAAa,EAAE,CAACA,aAAa,CAAC,CAAC;EACrDvK,UAAU,CAAC,MAAM;IACf,IAAImI,KAAK,CAACmH,eAAe,EAAE;MACzBjM,OAAO,CAACF,OAAO,CAAC,CAAC,CAACoM,IAAI,CAAC,MAAM;QAC3B3M,MAAM,CAACM,OAAO,CAACwK,eAAe,CAACvF,KAAK,CAACwF,eAAe,CAAC;MACvD,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EACF7N,0BAA0B,CAAC8C,MAAM,EAAE;IAAA,IAAA4M,sBAAA;IAAA,QAAAA,sBAAA,GAAM5M,MAAM,CAACM,OAAO,CAACkI,yBAAyB,cAAAoE,sBAAA,uBAAxCA,sBAAA,CAA0CtM,OAAO;EAAA,GAAE,YAAY,EAAE4I,gBAAgB,EAAE;IAC1H2D,OAAO,EAAEjP,0BAA0B,CAAC;EACtC,CAAC,CAAC;EACFb,gBAAgB,CAACiD,MAAM,EAAE;IACvB8K;EACF,CAAC,EAAE,QAAQ,CAAC;EACZhO,sBAAsB,CAACkD,MAAM,EAAE,kBAAkB,EAAEqK,gBAAgB,CAAC;EACpEvN,sBAAsB,CAACkD,MAAM,EAAE,mBAAmB,EAAEiK,iBAAiB,CAAC;EACtEnN,sBAAsB,CAACkD,MAAM,EAAE,0BAA0B,EAAEsK,2BAA2B,CAAC;EACvFxN,sBAAsB,CAACkD,MAAM,EAAE,4BAA4B,EAAE0K,gCAAgC,CAAC;EAC9F1N,uBAAuB,CAACgD,MAAM,EAAE,cAAc,EAAEuF,KAAK,CAACuH,cAAc,CAAC;EACrE9P,uBAAuB,CAACgD,MAAM,EAAE,mBAAmB,EAAEuF,KAAK,CAACwH,mBAAmB,CAAC;AACjF,CAAC;AACD,SAASxF,cAAcA,CAAC1D,OAAO,EAAEmJ,QAAQ,EAAEC,KAAK,EAAE;EAChD,IAAI,CAACpJ,OAAO,EAAE;IACZ;EACF;EACAA,OAAO,CAACC,KAAK,CAACkJ,QAAQ,CAAC,MAAA3J,MAAA,CAAMa,QAAQ,CAACL,OAAO,CAACC,KAAK,CAACkJ,QAAQ,CAAC,EAAE,EAAE,CAAC,GAAGC,KAAK,OAAI;AAChF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}